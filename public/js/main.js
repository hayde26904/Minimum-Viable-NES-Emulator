(()=>{"use strict";var t,n=function(){function t(){}return t.immediate=function(t,n,o){var e=o[0];t.setAreg(e)},t}(),o=function(){function t(){}return t.zeroPage=function(t,n,o){var e=o[0];n.write(e,t.getAreg()),console.log("Storing A register (".concat(t.getAreg(),") in memory at address: ").concat(e))},t}(),e=function(){function t(){}return t.absolute=function(t,n,o){var e=s.bytesToAddr(o[0],o[1]);t.setPC(e-o.length-1),console.log("Jumping to address: ".concat(e))},t}(),r=function(t,n){this.method=t,this.numArgs=n},i=new Map([[169,new r(n.immediate,1)],[133,new r(o.zeroPage,1)],[76,new r(e.absolute,2)]]),s=function(){function t(){this.Areg=0,this.Xreg=0,this.Yreg=0,this.PC=32768,this.SP=0,this.Cflag=!1,this.Zflag=!1,this.Nflag=!1}return t.prototype.reset=function(){this.Areg=0,this.Xreg=0,this.Yreg=0,this.PC=32768,this.SP=0,this.Cflag=!1,this.Zflag=!1,this.Nflag=!1},t.bytesToAddr=function(t,n){return n<<8|t},t.prototype.executeOperation=function(t,n){var o=n,e=this.PC-32768,r=o.read(e);if(console.log("PC: ",this.PC),i.has(r)){for(var s=i.get(r),u=new Uint8Array(s.numArgs),c=0;c<s.numArgs;c++)u[c]=o.read(e+c+1);console.log("opcode: ",r),console.log("args ",u),s.method(this,t,u),this.PC+=s.numArgs+1}else console.log("Invalid or unimplemented opcode: ".concat(r)),this.PC++},t.prototype.setPC=function(t){this.PC=t,console.log("SET PC: ",this.PC)},t.prototype.getPC=function(){return this.PC},t.prototype.setAreg=function(t){this.Areg=255&t,this.setFlags(t),console.log("SET AREG: ",this.Areg)},t.prototype.setXreg=function(t){this.Xreg=255&t,this.setFlags(t)},t.prototype.setYreg=function(t){this.Yreg=255&t,this.setFlags(t)},t.prototype.getAreg=function(){return this.Areg},t.prototype.getXreg=function(){return this.Xreg},t.prototype.getYreg=function(){return this.Yreg},t.prototype.setFlags=function(t){if(-1!==t){var n=t;this.Cflag=this.overflow,this.Zflag=0===n,this.Nflag=!(128&~n)}},t.prototype.getFlags=function(){return{Z:this.Zflag,N:this.Nflag,C:this.Cflag}},t}(),u=function(){function t(t,n){this.memory=n||new Uint8Array(t).fill(0)}return t.prototype.read=function(t){return this.memory[t]},t.prototype.write=function(t,n){this.memory[t]=n},t}(),c=(t=function(n,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])},t(n,o)},function(n,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),f=function(t){function n(n,o){return t.call(this,n,o)||this}return c(n,t),n}(u),a=function(){function t(){this.cpu=new s,this.ram=new f(2048),this.currentPrgRom=null}return t.prototype.loadProgram=function(t){this.cpu.reset(),this.currentPrgRom=t},t.prototype.step=function(){this.cpu.executeOperation(this.ram,this.currentPrgRom)},t}(),g=function(){var t=function(n,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])},t(n,o)};return function(n,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),l=function(t){function n(n){return t.call(this,n.length,n)||this}return g(n,t),n}(u),p=new Uint8Array(7).fill(0);p[0]=169,p[1]=105,p[2]=133,p[3]=1,p[4]=76,p[5]=0,p[6]=128;var h=new l(p),y=new a;y.loadProgram(h),setInterval((function(){y.step()}),500)})();