(()=>{"use strict";var t,e=function(){function t(){}return t.bytesToAddr=function(t,e){return e<<8|t},t}(),n=function(){function t(){}return t.immediate=function(t,e,n){var o=n[0];t.setAreg(o),console.log("Loading immediate value into A register: ".concat(o))},t.zeroPage=function(t,e,n){var o=n[0],r=e.read(o);t.setAreg(r),console.log("Loading value from zeropage at address: ".concat(o," into A register: ").concat(r))},t.absolute=function(t,n,o){var r=e.bytesToAddr(o[0],o[1]),i=n.read(r);t.setAreg(i),console.log("Loading value from memory at address: ".concat(r," into A register: ").concat(i))},t}(),o=function(){function t(){}return t.zeroPage=function(t,e,n){var o=n[0];e.write(o,t.getAreg()),console.log("Storing A register (".concat(t.getAreg(),") in memory at address: ").concat(o))},t}(),r=function(){function t(){}return t.absolute=function(t,n,o){var r=e.bytesToAddr(o[0],o[1]);t.setPC(r-o.length-1),console.log("Jumping to address: ".concat(r))},t}(),i=function(t,e){this.method=t,this.numArgs=e},s=new Map([[169,new i(n.immediate,1)],[165,new i(n.zeroPage,1)],[173,new i(n.absolute,2)],[133,new i(o.zeroPage,1)],[76,new i(r.absolute,2)]]),c=function(){function t(){this.Areg=0,this.Xreg=0,this.Yreg=0,this.PC=32768,this.SP=0,this.Cflag=!1,this.Zflag=!1,this.Nflag=!1}return t.prototype.reset=function(){this.Areg=0,this.Xreg=0,this.Yreg=0,this.PC=32768,this.SP=0,this.Cflag=!1,this.Zflag=!1,this.Nflag=!1},t.prototype.executeOperation=function(t,e){var n=e,o=this.PC-32768,r=n.read(o);if(s.has(r)){for(var i=s.get(r),c=new Uint8Array(i.numArgs),u=0;u<i.numArgs;u++)c[u]=n.read(o+u+1);i.method(this,t,c),this.PC+=i.numArgs+1}else console.log("Invalid or unimplemented opcode: ".concat(r)),this.PC++},t.prototype.setPC=function(t){this.PC=t,console.log("SET PC: ",this.PC)},t.prototype.getPC=function(){return this.PC},t.prototype.setAreg=function(t){this.Areg=255&t,this.setFlags(t),console.log("SET AREG: ",this.Areg)},t.prototype.setXreg=function(t){this.Xreg=255&t,this.setFlags(t)},t.prototype.setYreg=function(t){this.Yreg=255&t,this.setFlags(t)},t.prototype.getAreg=function(){return this.Areg},t.prototype.getXreg=function(){return this.Xreg},t.prototype.getYreg=function(){return this.Yreg},t.prototype.setFlags=function(t){if(-1!==t){var e=t;this.Cflag=this.overflow,this.Zflag=0===e,this.Nflag=!(128&~e)}},t.prototype.getFlags=function(){return{Z:this.Zflag,N:this.Nflag,C:this.Cflag}},t}(),u=function(){function t(t,e){this.memory=e||new Uint8Array(t).fill(0)}return t.prototype.read=function(t){return this.memory[t]},t.prototype.write=function(t,e){this.memory[t]=e},t}(),a=(t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}),f=function(t){function e(e,n){return t.call(this,e,n)||this}return a(e,t),e}(u),g=function(){function t(){this.cpu=new c,this.ram=new f(2048),this.currentPrgRom=null}return t.prototype.loadProgram=function(t){this.cpu.reset(),this.currentPrgRom=t},t.prototype.step=function(){this.cpu.executeOperation(this.ram,this.currentPrgRom)},t}(),l=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),p=function(t){function e(e){return t.call(this,e.length,e)||this}return l(e,t),e}(u),h=new Uint8Array(13).fill(0);h[0]=169,h[1]=105,h[2]=133,h[3]=1,h[4]=165,h[5]=1,h[6]=133,h[7]=2,h[8]=76,h[9]=0,h[10]=128;var y=new p(h),d=new g;d.loadProgram(y),setInterval((function(){d.step()}),500)})();